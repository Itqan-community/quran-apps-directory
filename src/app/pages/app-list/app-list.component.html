<!-- Main container -->
<div class="container">
  <!-- Search section -->
  <div class="search-section">
    <!-- Search input with icon prefix -->
    <nz-input-group [nzPrefix]="searchPrefix">
      <input
        type="text"
        nz-input
        [placeholder]="'appList.search.placeholder' | translate"
        [(ngModel)]="searchQuery"
        (ngModelChange)="onSearch()"
        aria-label="Search apps"
      />
    </nz-input-group>
    <!-- Search icon template -->
    <ng-template #searchPrefix>
      <span nz-icon nzType="search"></span>
    </ng-template>
  </div>

  <!-- Categories section -->
  <div class="categories-section">
    <h2>{{ "appList.categories.title" | translate }}</h2>
    <!-- Grid of category buttons -->
    <div
      class="categories-grid"
      (mousedown)="startDragging($event)"
      (mousemove)="onDrag($event)"
      (mouseup)="stopDragging()"
      (mouseleave)="stopDragging()"
    >
      <div
        class="category-item"
        *ngFor="let category of categories"
        (click)="filterByCategory(category.name)"
        role="button"
        [attr.aria-label]="'Filter by ' + category.name"
      >
        <span class="category-icon" [innerHTML]="category.icon"></span>
        <span>{{
          "appList.categories." + category.name.toLowerCase() | translate
        }}</span>
      </div>
    </div>
  </div>

  <!-- Apps grid section -->
  <div class="apps-section">
    <div class="section-header">
      <h2>{{ "appList.apps.title" | translate }}</h2>
      <!-- Sort button -->
      <button
        nz-button
        nzType="text"
        (click)="toggleSort()"
        aria-label="Sort by rating"
      >
        <span
          nz-icon
          [nzType]="sortAscending ? 'sort-ascending' : 'sort-descending'"
          nzTheme="outline"
        ></span>
      </button>
    </div>

    <!-- Grid of app cards -->
    <div class="app-grid">
      <!-- App card with cover image -->
      <nz-card
        *ngFor="let app of filteredApps"
        [nzCover]="coverTemplate"
        [routerLink]="['/app', app.id]"
        [attr.aria-label]="'View details for ' + app.name"
        class="app-card"
      >
        <nz-card-meta
          [nzTitle]="app.name"
          [nzDescription]="app.description[currentLang]"
        ></nz-card-meta>
        <!-- Rating display -->
        <div class="app-rating">
          <nz-rate [ngModel]="app.rating" [nzDisabled]="true"></nz-rate>
          <span class="rating-number">{{ app.rating }}</span>
        </div>
      </nz-card>
      <!-- Card cover image template -->
      <ng-template #coverTemplate>
        <img
          alt="App screenshot"
          src="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"
        />
      </ng-template>
    </div>
  </div>
</div>
