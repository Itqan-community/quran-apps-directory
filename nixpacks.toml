# Nixpacks configuration for Railway backend deployment

[phases.setup]
nixPkgs = ["...", "python39", "postgresql"]

[phases.install]
cmd = "pip install -r backend/requirements/production.txt"

[phases.build]
cmd = "cd backend && python manage.py migrate && python manage.py collectstatic --noinput"

[start]
cmd = "cd backend && gunicorn --bind 0.0.0.0:8000 --workers 4 --worker-class sync --timeout 30 config.wsgi:application"